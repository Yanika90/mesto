(()=>{"use strict";var t=document.querySelector(".popup_type_edit-profile"),e=document.querySelector(".popup_type_add-card"),r=document.querySelector(".popup_type_avatar-edit"),n=document.querySelector(".profile__edit-button"),o=document.querySelector(".profile__avatar-edit"),i=document.querySelector(".profile__add-button"),u=document.querySelector(".popup__input_type_name"),c=document.querySelector(".popup__input_type_about-yourself");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var s=function(){function t(e,r,n,o){var i=o.handleCardClick,u=o.handleDeleteCardClick,c=o.handleLikeClick,a=o.handleLikeDeliteClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._alt=e.name,this._link=e.link,this._likes=e.likes,this._likesId=e.likes._id,this._cardId=e._id,this._ownerId=e.owner._id,this._userId=r,this._cardTemplateSelector=n,this._handleCardClick=i,this._handleDeleteCardClick=u,this._handleLikeClick=c,this._handleLikeDeliteClick=a,console.log(this._cardId)}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".photo").cloneNode(!0)}},{key:"deleteCard",value:function(){this._card.remove(),this._card=null}},{key:"isLiked",value:function(){return this._cardLikeButton.classList.contains("photo__like-button_active")}},{key:"likeCard",value:function(t){this._cardLikeCounter.textContent=t,this._cardLikeButton.classList.toggle("photo__like-button_active")}},{key:"_setEventListeners",value:function(){var t=this;this._cardDeleteButton.addEventListener("click",(function(){t._handleDeleteCardClick(t)})),this._cardLikeButton.addEventListener("click",(function(){t._handleLikeClick(t)})),this._cardImage.addEventListener("click",(function(){t._handleCardClick({name:t._name,link:t._link})}))}},{key:"generateCard",value:function(){var t=this;return this._card=this._getTemplate(),this._cardTitle=this._card.querySelector(".photo__title"),this._cardImage=this._card.querySelector(".photo__image"),this._cardDeleteButton=this._card.querySelector(".photo__delete-button"),this._cardLikeButton=this._card.querySelector(".photo__like-button"),this._cardLikeCounter=this._card.querySelector(".photo__like-count"),this._cardTitle.textContent=this._name,this._cardImage.setAttribute("src",this._link),this._cardImage.setAttribute("alt",this._alt),this._cardLikeCounter.textContent=this._likes.length,this._setEventListeners(),this._userId!==this._ownerId&&this._cardDeleteButton.remove(),this._likes.forEach((function(e){e._id===t._userId&&t._cardLikeButton.classList.add("photo__like-button_active")})),this._card}}])&&l(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f={formSelector:".popup__input-form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_type_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_type_active"};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function d(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}var m=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"_showInputError",(function(t,e){var r=n._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(n._inputErrorClass),r.classList.add(n._errorClass),r.textContent=e})),d(this,"_hideInputError",(function(t){var e=n._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(n._inputErrorClass),e.classList.remove(n._errorClass),e.textContent=""})),d(this,"_checkInputValidity",(function(t){t.validity.valid?n._hideInputError(t):n._showInputError(t,t.validationMessage)})),d(this,"_toggleButtonState",(function(){n._hasInvalidInput(n._inputList)?(n._buttonElement.classList.add(n._inactiveButtonClass),n._buttonElement.disabled=!0):(n._buttonElement.classList.remove(n._inactiveButtonClass),n._buttonElement.disabled=!1)})),d(this,"_setEventListeners",(function(){n._inputList=Array.from(n._formElement.querySelectorAll(n._inputSelector)),n._buttonElement=n._formElement.querySelector(n._submitButtonSelector),n._toggleButtonState(),n._inputList.forEach((function(t){t.addEventListener("input",(function(){n._checkInputValidity(t),n._toggleButtonState()}))}))})),d(this,"resetFormError",(function(){n._inputList.forEach((function(t){n._hideInputError(t)})),n._toggleButtonState()})),d(this,"enableValidation",(function(){n._formElement.addEventListener("submit",(function(t){t.preventDefault()})),n._setEventListeners()})),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=r}var e,r;return e=t,(r=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}}])&&y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var b=function(){function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){return e._renderer(t)}))}}])&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}var k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleClosePopupEsc=this._handleClosePopupEsc.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleClosePopupEsc)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleClosePopupEsc)}},{key:"_handleClosePopupEsc",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close(),e.target.classList.contains("popup__close-button")&&t.close()}))}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},C.apply(this,arguments)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(n);if(o){var r=j(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._imagePopup=e._popup.querySelector(".popup__image"),e._imageTitle=e._popup.querySelector(".popup__image-title"),e}return e=u,(r=[{key:"open",value:function(t){C(j(u.prototype),"open",this).call(this),this._imageTitle.textContent=t.name,this._imagePopup.src=t.link,this._imagePopup.alt=t.name}}])&&E(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(k);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},T.apply(this,arguments)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(n);if(o){var r=B(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var r,n=e.handleSubmitForm;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,t))._popupForm=r._popup.querySelector(".popup__input-form"),r._inputList=r._popupForm.querySelectorAll(".popup__input"),r._submitButton=r._popupForm.querySelector(".popup__save-button"),r._submitButtonText=r._submitButton.textContent,r._handleSubmitForm=n,r}return e=u,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputValues={},this._inputList.forEach((function(e){t._inputValues[e.name]=e.value})),console.log(this._inputValues),this._inputValues}},{key:"setEventListeners",value:function(){var t=this;T(B(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){T(B(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"renderLoading",value:function(t){this._submitButton.textContent=t?"Сохранение...":this._submitButtonText}}])&&I(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(k);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===A(o)?o:String(o)),n)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},D.apply(this,arguments)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(u,t);var e,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(n);if(o){var r=U(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupForm=e._popup.querySelector(".popup__input-form"),e}return e=u,(r=[{key:"setEventListeners",value:function(){var t=this;D(U(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._callbackSubmitForm()}))}},{key:"setSubmitAction",value:function(t){this._callbackSubmitForm=t}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(k);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===N(o)?o:String(o)),n)}var o}var J,G=function(){function t(e){var r=e.userNameSelector,n=e.userAboutSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameInput=document.querySelector(r),this._userAboutYourselfInput=document.querySelector(n),this._userAvatarInput=document.querySelector(o)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._userNameInput.textContent,about:this._userAboutYourselfInput.textContent}}},{key:"setUserInfo",value:function(t){this._userNameInput.textContent=t.name,this._userAboutYourselfInput.textContent=t.about}},{key:"setUserAvatar",value:function(t){this._userAvatarInput.src=t}}])&&Y(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==H(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===H(o)?o:String(o)),n)}var o}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $=new(function(){function t(e){var r=e.url,n=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=r,this._headers=n}var e,r;return e=t,(r=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"editUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.userNameInput,about:t.userAboutYourselfInput})}).then(this._checkResponse)}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatarLinkInput})}).then(this._checkResponse)}},{key:"getPhotoCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"addCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(this._checkResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"likeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"dislikeCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&M(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}())({url:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"e368c92f-c32b-427b-8564-6fade10747a3","Content-Type":"application/json"}});Promise.all([$.getUserInfo(),$.getPhotoCards()]).then((function(t){var e,r,n=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];J=o._id,X.setUserInfo(o),X.setUserAvatar(o.avatar),rt.renderItems(i)})).catch((function(t){console.log("Ошибка сервера: ".concat(t))}));var K=new m(f,t);K.enableValidation();var Q=new m(f,e);Q.enableValidation();var W=new m(f,r);W.enableValidation();var X=new G({userNameSelector:".profile__name",userAboutSelector:".profile__about-yourself",userAvatarSelector:".profile__avatar"}),Z=new q(".popup_type_edit-profile",{handleSubmitForm:function(t){Z.renderLoading(!0),$.editUserInfo(t).then((function(t){X.setUserInfo(t),Z.close()})).catch((function(t){console.log("При редактировании профиля возникла ошибка: ".concat(t))})).finally((function(){Z.renderLoading(!1)}))}});Z.setEventListeners(),n.addEventListener("click",(function(){Z.open();var t=X.getUserInfo();u.value=t.name,c.value=t.about,K.resetFormError()}));var tt=new q(".popup_type_avatar-edit",{handleSubmitForm:function(t){tt.renderLoading(!0),$.editUserAvatar(t).then((function(t){X.setUserAvatar(t.avatar),tt.close()})).catch((function(t){console.log("При изменении аватара возникла ошибка: ".concat(t))})).finally((function(){tt.renderLoading(!1)}))}});tt.setEventListeners(),o.addEventListener("click",(function(){tt.open(),W.resetFormError()}));var et=new q(".popup_type_add-card",{handleSubmitForm:function(t){var e=t.placeNameInput,r=t.placeLinkInput;et.renderLoading(!0),$.addCard({name:e,link:r}).then((function(t){rt.addItem(nt(t)),et.close()})).catch((function(t){console.log("При добавлении карточки возникла ошибка: ".concat(t))})).finally((function(){et.renderLoading(!1)}))}});et.setEventListeners(),i.addEventListener("click",(function(){et.open(),Q.resetFormError()}));var rt=new b({renderer:function(t){rt.addItem(nt(t))}},".photos");function nt(t){var e=new s(t,J,"#cardTemplate",{handleCardClick:function(t){ot.open(t)},handleDeleteCardClick:function(e){it.open(),it.setSubmitAction((function(){$.deleteCard(t).then((function(t){e.deleteCard(t),it.close()})).catch((function(t){console.log("При удалении карточки возникла ошибка: ".concat(t))}))}))},handleLikeClick:function(){e.isLiked()?$.dislikeCard(t._id).then((function(t){e.likeCard(t.likes.length)})).catch((function(t){console.log("При удалении лайка возникла ошибка: ".concat(t))})):$.likeCard(t._id).then((function(t){e.likeCard(t.likes.length)})).catch((function(t){console.log("При добавлении лайка возникла ошибка: ".concat(t))}))}});return e.generateCard()}var ot=new O(".popup_type_image-open");ot.setEventListeners();var it=new V(".popup_type_image-delete");it.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ek0sR0FDbEIsSUFBTTBNLEVBQVUsSUFBSTNNLEVBQUtDLEVBQU1DLEVBQVEsZ0JBQWlCLENBQ3RERyxnQkFBaUIsU0FBQUosR0FDZjJNLEdBQWVaLEtBQUsvTCxFQUN0QixFQUNBSyxzQkFBdUIsU0FBQThGLEdBQ3JCeUcsR0FBZ0JiLE9BQ2hCYSxHQUFnQkMsaUJBQWdCLFdBQzlCM0QsRUFDRzRELFdBQVc5TSxHQUNYZ0ssTUFBSyxTQUFBUixHQUNKckQsRUFBSzJHLFdBQVd0RCxHQUNoQm9ELEdBQWdCL0YsT0FDbEIsSUFDQ3VFLE9BQU0sU0FBQUMsR0FDTHpKLFFBQVFDLElBQUksMENBQUR5QyxPQUEyQytHLEdBQ3hELEdBQ0osR0FDRixFQUNBL0ssZ0JBQWlCLFdBQ1ZvTSxFQUFRSyxVQVVYN0QsRUFDRzhELFlBQVloTixFQUFLa0IsS0FDakI4SSxNQUFLLFNBQUFoSyxHQUNKME0sRUFBUU8sU0FBU2pOLEVBQUtnQixNQUFNbUMsT0FDOUIsSUFDQ2lJLE9BQU0sU0FBQUMsR0FDTHpKLFFBQVFDLElBQUksdUNBQUR5QyxPQUF3QytHLEdBQ3JELElBaEJGbkMsRUFDRytELFNBQVNqTixFQUFLa0IsS0FDZDhJLE1BQUssU0FBQWhLLEdBQ0owTSxFQUFRTyxTQUFTak4sRUFBS2dCLE1BQU1tQyxPQUM5QixJQUNDaUksT0FBTSxTQUFBQyxHQUNMekosUUFBUUMsSUFBSSx5Q0FBRHlDLE9BQTBDK0csR0FDdkQsR0FXTixJQUdGLE9BRG9CcUIsRUFBUVEsY0FFOUIsQ0FHQSxJQUFNUCxHQUFpQixJQUFJNUYsRUFBZSwwQkFDMUM0RixHQUFlYixvQkFHZixJQUFNYyxHQUFrQixJQUFJckUsRUFBc0IsNEJBQ2xEcUUsR0FBZ0JkLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvcmVzdENvbnN0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25maWdWYWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZScpOyAvLyDQv9GA0L7RhNC40LvRjFxyXG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQtY2FyZCcpOyAvLyDRhNC+0YLQvtC60LDRgNGC0L7Rh9C60LBcclxuY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hdmF0YXItZWRpdCcpOyAvLyDQsNCy0LDRgtCw0YBcclxuY29uc3QgcHJvZmlsZUJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTsgLy8gINGA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC/0YDQvtGE0LjQu9GMXHJcbmNvbnN0IGF2YXRhckJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWVkaXQnKTsgLy8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LDQstCw0YLQsNGAXHJcbmNvbnN0IHBvcHVwQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7IC8vINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG5jb25zdCB1c2VyTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTsgLy8g0L/QvtC70LUg0LLQstC+0LTQsCBcItC40LzRj1wiXHJcbmNvbnN0IHVzZXJBYm91dFlvdXJzZWxmSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYWJvdXQteW91cnNlbGYnKTsgLy8g0L/QvtC70LUg0LLQstC+0LTQsCBcItC+INGB0LXQsdC1XCJcclxuXHJcbmV4cG9ydCB7XHJcbiAgcHJvZmlsZVBvcHVwLFxyXG4gIGNhcmRQb3B1cCxcclxuICBhdmF0YXJQb3B1cCxcclxuICBwcm9maWxlQnV0dG9uRWRpdCxcclxuICBhdmF0YXJCdXR0b25FZGl0LFxyXG4gIHBvcHVwQWRkQ2FyZEJ1dHRvbixcclxuICB1c2VyTmFtZUlucHV0LFxyXG4gIHVzZXJBYm91dFlvdXJzZWxmSW5wdXRcclxufTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgdXNlcklkLFxyXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2xpY2ssIGhhbmRsZUxpa2VEZWxpdGVDbGljayB9XHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2xpa2VzSWQgPSBkYXRhLmxpa2VzLl9pZDsgLy8gaWQg0LvQsNC50LrQvtCyXHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDsgLy8gaWQg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkOyAvLyBpZCDQstC70LDQtNC10L3RjNGG0LBcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDsgLy8gaWQg0YLQtdC60YPRidC10LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2sgPSBoYW5kbGVEZWxldGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlRGVsaXRlQ2xpY2sgPSBoYW5kbGVMaWtlRGVsaXRlQ2xpY2s7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9jYXJkSWQpO1xyXG4gIH1cclxuXHJcbiAgLy8g0KHQvtC30LTQsNC90LjQtSDRiNCw0LHQu9C+0LrQvdCwINC60LDRgNGC0L7Rh9C60LhcclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90bycpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIG5ld0NhcmQ7XHJcbiAgfVxyXG5cclxuICAvLyDQo9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gIH1cclxuICAvLyDQm9Cw0LnQuiDQuCDQtNC40LfQu9Cw0LnQuiDQutCw0YDRgtC+0YfQutC4XHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bob3RvX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNvdW50KSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudDtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3Bob3RvX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPOiDRg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPOiDQvdGA0LDQstC40YLRgdGPINC60LDRgNGC0L7Rh9C60LBcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0LrRgNGL0YLQuNGPINC/0YDQvtGB0LzQvtGC0YDQsCDQuNC30L7QsdGA0LDQttC10L3QuNGPXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcucGhvdG9fX3RpdGxlJyk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5waG90b19faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fZGVsZXRlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fbGlrZS1idXR0b24nKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLnBob3RvX19saWtlLWNvdW50Jyk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fbGluayk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCB0aGlzLl9hbHQpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2xpa2VzLmZvckVhY2gobGlrZSA9PiB7XHJcbiAgICAgIGlmIChsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncGhvdG9fX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IENhcmQgfTtcclxuIiwiLy8gY29uZmlnINCx0YPQtNC10Lwg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINC00LvRjyDQt9Cw0LzQtdC90Ysg0L7QsdGA0LDRidC10L3QuNGPL9C/0L7QuNGB0LrQsCDQv9C+INGB0LXQu9C10LrRgtC+0YDQsNC8INC4INC60LvQsNGB0YHQsCAo0LTQvtCx0LDQstC70Y/QtdC8INCyINC90LXQs9C+INCy0YHQtSDQvdGD0LbQvdGL0LUg0Y3Qu9C10LzQtdC90YLRiylcclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2lucHV0LWZvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZS1idXR0b25fdHlwZV9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfdHlwZV9hY3RpdmUnXHJcbn07XHJcbiIsIi8vINCS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxyXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vINGE0YPQvdC60YbQuNC4INC/0L7QutCw0LfQsCDQuCDRgdC60YDRi9GC0LjRjyDQvtGI0LjQsdC60LggKNC/0LXRgNC10LTQsNGC0Ywg0LIgY2hlY2tJbnB1dFZhbGlkaXR5KVxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIHZhbGlkYXRpb25NZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSB2YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSBpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQstCw0LvQuNC00L3QvtGB0YLQuCDQtNCw0L3QvdGL0YVcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gaW5wdXRFbGVtZW50ID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQstCw0LvQuNC00L3QvtGB0YLQuCDQuNC80L/Rg9GC0L7QslxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgLy/QldGB0LvQuCDQv9C+0LvQtSDQvdC1INCy0LDQu9C40LTQvdC+LCDQutC+0LvQsdGN0Log0LLQtdGA0L3RkdGCIHRydWVcclxuICAgICAgLy8g0J7QsdGF0L7QtCDQvNCw0YHRgdC40LLQsCDQv9GA0LXQutGA0LDRgtC40YLRgdGPINC4INCy0YHRjyDRhNGD0L3QutGG0LjRjyDQstC10YDQvdGR0YIgdHJ1ZVxyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0YTRg9C90LrRhtC40Y8g0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4IFwi0YHQvtGF0YDQsNC90LjRgtGMXCJcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINC90LDQutC70LDQtNGL0LLQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQvdCwINC/0L7Qu9GPINGE0L7RgNC8XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgLy/QvdCw0YXQvtC00LjQvCDQuNC90L/Rg9GC0YtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAvLyDQvdCw0YXQvtC00LjQvCDQutC90L7Qv9C60YMgXCLRgdC+0YXRgNCw0L3QuNGC0YxcIlxyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAvLyDQv9GA0L7QstC10YDRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDRhNGD0L3QutGG0LjRjyDRgdCx0YDQvtGB0LAg0L7RgtC80LXRgtC+0Log0L3QtdCy0LDQu9C40LTQvdC+0YHRgtC4INGE0L7RgNC80Ysg0L/RgNC4INC/0L7QstGC0L7RgNC90L7QvCDQvtGC0LrRgNC40YLQuNC4XHJcbiAgcmVzZXRGb3JtRXJyb3IgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIC8vINC30LDQv9GD0YHQuiDQv9GA0L7RhtC10YHRgdCwINC90LDQu9C+0LbQtdC90LjRjyDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZ0ID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LrQsNGA0YLQvtGH0LrRgyDQsiBET01cclxuICBhZGRJdGVtKGNhcmQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xyXG4gIH1cclxuXHJcbiAgLy8g0J7RgtGA0LjRgdC+0LLQutCwINC60LDQttC00L7Qs9C+INC+0YLQtNC10LvRjNC90L7Qs9C+INGN0LvQtdC80LXQvdGC0LBcclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUNsb3NlUG9wdXBFc2MgPSB0aGlzLl9oYW5kbGVDbG9zZVBvcHVwRXNjLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cEVzYyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUNsb3NlUG9wdXBFc2MpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlUG9wdXBFc2MoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldnQgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VQb3B1cCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLXRpdGxlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGl0ZW0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwLnNyYyA9IGl0ZW0ubGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wdXAuYWx0ID0gaXRlbS5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlU3VibWl0Rm9ybSB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9pbnB1dFZhbHVlcyk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZ0ID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXQtZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2dCA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdEZvcm0oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5fY2FsbGJhY2tTdWJtaXRGb3JtID0gYWN0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IHtcclxuICBwcm9maWxlUG9wdXAsXHJcbiAgY2FyZFBvcHVwLFxyXG4gIGF2YXRhclBvcHVwLFxyXG4gIHByb2ZpbGVCdXR0b25FZGl0LFxyXG4gIGF2YXRhckJ1dHRvbkVkaXQsXHJcbiAgcG9wdXBBZGRDYXJkQnV0dG9uLFxyXG4gIHVzZXJOYW1lSW5wdXQsXHJcbiAgdXNlckFib3V0WW91cnNlbGZJbnB1dFxyXG59IGZyb20gJy4uL3V0aWxzL3Jlc3RDb25zdC5qcyc7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi91dGlscy9jb25maWdWYWxpZGF0aW9uLmpzJztcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FQSS5qcyc7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBBUEkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxubGV0IHVzZXJJZDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjUnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdlMzY4YzkyZi1jMzJiLTQyN2ItODU2NC02ZmFkZTEwNzQ3YTMnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRQaG90b0NhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmREYXRhXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZERhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwOiAke2Vycn1gKTtcclxuICB9KTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDQktCQ0JvQmNCU0JDQptCY0K8g0KTQntCg0JwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Qcm9maWxlUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVQb3B1cCk7IC8vINC/0YDQvtGE0LjQu9GMXHJcbnZhbGlkYXRpb25Qcm9maWxlUG9wdXAuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCB2YWxpZGF0aW9uQ2FyZFBvcHVwID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkUG9wdXApOyAvLyDQutCw0YDRgtC+0YfQutCwXHJcbnZhbGlkYXRpb25DYXJkUG9wdXAuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCB2YWxpZGF0aW9uQXZhdGFyUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGF2YXRhclBvcHVwKTsgLy8g0LDQstCw0YLQsNGAXHJcbnZhbGlkYXRpb25BdmF0YXJQb3B1cC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSDQmtCb0JDQodCh0Ksg0KTQntCg0JwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbi8vIH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiAg0JLQodCBLCDQp9Ci0J4g0JrQkNCh0JDQldCi0KHQryDQn9Cg0J7QpNCY0JvQryB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gLy9cclxuXHJcbi8vINCeINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICB1c2VyQWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dC15b3Vyc2VsZicsXHJcbiAgdXNlckF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcclxufSk7XHJcblxyXG4vLyDQpNC+0YDQvNCwINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnLCB7XHJcbiAgaGFuZGxlU3VibWl0Rm9ybTogZGF0YSA9PiB7XHJcbiAgICBwb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFVzZXJJbmZvKGRhdGEpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCf0YDQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC4INC/0YDQvtGE0LjQu9GPINCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwUHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDRgdC+0LHRi9GC0LjRjyDQtNC70Y8g0L/RgNC+0YTQuNC70Y8g0L/QviDQutC70LjQutGDOiDQvtGC0LrRgNGL0YLQuNC1INC4INC30LDQutGA0YvRgtC40LVcclxucHJvZmlsZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgdXNlck5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgdXNlckFib3V0WW91cnNlbGZJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0O1xyXG4gIHZhbGlkYXRpb25Qcm9maWxlUG9wdXAucmVzZXRGb3JtRXJyb3IoKTtcclxufSk7XHJcblxyXG4vLyDQkNCy0LDRgtCw0YBcclxuY29uc3QgbmV3QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhci1lZGl0Jywge1xyXG4gIGhhbmRsZVN1Ym1pdEZvcm06IGRhdGEgPT4ge1xyXG4gICAgbmV3QXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyQXZhdGFyKGRhdGEpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgICBuZXdBdmF0YXIuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCf0YDQuCDQuNC30LzQtdC90LXQvdC40Lgg0LDQstCw0YLQsNGA0LAg0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgbmV3QXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxubmV3QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5hdmF0YXJCdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIG5ld0F2YXRhci5vcGVuKCk7XHJcbiAgdmFsaWRhdGlvbkF2YXRhclBvcHVwLnJlc2V0Rm9ybUVycm9yKCk7XHJcbn0pO1xyXG5cclxuLy8gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+INCS0KHQgSwg0KfQotCeINCa0JDQodCQ0JXQotCh0K8g0JrQkNCg0KLQntCn0JXQmiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gLy9cclxuXHJcbi8v0KTQvtGC0L7QutCw0YDRgtC+0YfQutCwXHJcbmNvbnN0IHBvcHVwQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hZGQtY2FyZCcsIHtcclxuICBoYW5kbGVTdWJtaXRGb3JtOiAoeyBwbGFjZU5hbWVJbnB1dCwgcGxhY2VMaW5rSW5wdXQgfSkgPT4ge1xyXG4gICAgcG9wdXBDYXJkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoeyBuYW1lOiBwbGFjZU5hbWVJbnB1dCwgbGluazogcGxhY2VMaW5rSW5wdXQgfSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuICAgICAgICBwb3B1cENhcmQuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCf0YDQuCDQtNC+0LHQsNCy0LvQtdC90LjQuCDQutCw0YDRgtC+0YfQutC4INCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbnBvcHVwQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucG9wdXBBZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQ2FyZC5vcGVuKCk7XHJcbiAgdmFsaWRhdGlvbkNhcmRQb3B1cC5yZXNldEZvcm1FcnJvcigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IGl0ZW0gPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgJy5waG90b3MnXHJcbik7XHJcblxyXG4vLyDQodC+0LfQtNCw0LXQvCDQutCw0YDRgtC+0YfQutGDINC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC10LVcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGRhdGEsIHVzZXJJZCwgJyNjYXJkVGVtcGxhdGUnLCB7XHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IGRhdGEgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmRDbGljazogY2FyZCA9PiB7XHJcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XHJcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQoZGF0YSlcclxuICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZChyZXMpO1xyXG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYNCf0YDQuCDRg9C00LDQu9C10L3QuNC4INC60LDRgNGC0L7Rh9C60Lgg0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUxpa2VDbGljazogKCkgPT4ge1xyXG4gICAgICBpZiAoIW5ld0NhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAubGlrZUNhcmQoZGF0YS5faWQpXHJcbiAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgbmV3Q2FyZC5saWtlQ2FyZChkYXRhLmxpa2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQn9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgg0LvQsNC50LrQsCDQstC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5kaXNsaWtlQ2FyZChkYXRhLl9pZClcclxuICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBuZXdDYXJkLmxpa2VDYXJkKGRhdGEubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYNCf0YDQuCDRg9C00LDQu9C10L3QuNC4INC70LDQudC60LAg0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vLyDQn9C+0L/QsNC/INGE0L7RgtC+0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2Utb3BlbicpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0J/QvtC/0LDQvyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfaW1hZ2UtZGVsZXRlJyk7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyQWJvdXRTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckFib3V0WW91cnNlbGZJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUlucHV0LnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0WW91cnNlbGZJbnB1dC50ZXh0Q29udGVudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lSW5wdXQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXRZb3Vyc2VsZklucHV0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIobGluaykge1xyXG4gICAgdGhpcy5fdXNlckF2YXRhcklucHV0LnNyYyA9IGxpbms7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyB1cmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyDQn9GA0L7QstC10YDQutCwINC30LDQv9GA0L7RgdCwINC6INGB0LXRgNCy0LXRgNGDXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8g0JTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgLy8g0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjzrQvtGC0L/RgNCw0LLQutCwINC4INC30LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS51c2VyTmFtZUlucHV0LFxyXG4gICAgICAgIGFib3V0OiBkYXRhLnVzZXJBYm91dFlvdXJzZWxmSW5wdXRcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQntCx0L3QvtCy0LvQtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICBlZGl0VXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJMaW5rSW5wdXRcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQl9Cw0LPRgNGD0LfQutCwINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcclxuICBnZXRQaG90b0NhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuICBhZGRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQo9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuICBkZWxldGVDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7ZGF0YS5faWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8g0JvQsNC50LrQuCDQuCDQtNC40LfQu9Cw0LnQutC4INC60LDRgNGC0L7Rh9C10LpcclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicHJvZmlsZVBvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FyZFBvcHVwIiwiYXZhdGFyUG9wdXAiLCJwcm9maWxlQnV0dG9uRWRpdCIsImF2YXRhckJ1dHRvbkVkaXQiLCJwb3B1cEFkZENhcmRCdXR0b24iLCJ1c2VyTmFtZUlucHV0IiwidXNlckFib3V0WW91cnNlbGZJbnB1dCIsIkNhcmQiLCJkYXRhIiwidXNlcklkIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfcmVmIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlTGlrZURlbGl0ZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9hbHQiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9saWtlc0lkIiwiX2lkIiwiX2NhcmRJZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX2NhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZUxpa2VEZWxpdGVDbGljayIsImNvbnNvbGUiLCJsb2ciLCJrZXkiLCJ2YWx1ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZCIsInJlbW92ZSIsIl9jYXJkTGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY291bnQiLCJfY2FyZExpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJ0b2dnbGUiLCJfdGhpcyIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJfdGhpczIiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZFRpdGxlIiwic2V0QXR0cmlidXRlIiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImxpa2UiLCJhZGQiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiY29uY2F0IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfZm9ybVNlbGVjdG9yIiwic29tZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmQiLCJwcmVwZW5kIiwiaXRlbXMiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUNsb3NlUG9wdXBFc2MiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlUG9wdXAiLCJfaW1hZ2VUaXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsIl9wb3B1cEZvcm0iLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpc0xvYWRpbmciLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfY2FsbGJhY2tTdWJtaXRGb3JtIiwiYWN0aW9uIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckFib3V0U2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWVJbnB1dCIsIl91c2VyQWJvdXRZb3Vyc2VsZklucHV0IiwiX3VzZXJBdmF0YXJJbnB1dCIsImFib3V0IiwiYXBpIiwiQXBpIiwidXJsIiwiaGVhZGVycyIsIl91cmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwiYXZhdGFyTGlua0lucHV0IiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0UGhvdG9DYXJkcyIsIl9yZWYyIiwidXNlckRhdGEiLCJjYXJkRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwidmFsaWRhdGlvblByb2ZpbGVQb3B1cCIsImVuYWJsZVZhbGlkYXRpb24iLCJ2YWxpZGF0aW9uQ2FyZFBvcHVwIiwidmFsaWRhdGlvbkF2YXRhclBvcHVwIiwicG9wdXBQcm9maWxlIiwicmVuZGVyTG9hZGluZyIsImVkaXRVc2VySW5mbyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsIm9wZW4iLCJyZXNldEZvcm1FcnJvciIsIm5ld0F2YXRhciIsImVkaXRVc2VyQXZhdGFyIiwicG9wdXBDYXJkIiwiX3JlZjMiLCJwbGFjZU5hbWVJbnB1dCIsInBsYWNlTGlua0lucHV0IiwiYWRkQ2FyZCIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwibmV3Q2FyZCIsInBvcHVwV2l0aEltYWdlIiwiZGVsZXRlQ2FyZFBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsZXRlQ2FyZCIsImlzTGlrZWQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiZ2VuZXJhdGVDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==